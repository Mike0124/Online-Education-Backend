# 在线教育项目的设计

## 环境

- IntelliJ IDEA
- JDK8

### Web前端框架

- 后台管理：Layui

### Android端



### 后端框架

- Spring Boot
- JPA
- Thymeleaf

### 数据库

- Mysql 8.0
- MangoDB
- DataGrip

## 用户功能

- 学生：注册、登录、报名课程、对课程评价、评论、作业展示、作业点赞
- 教师：注册、登录、开课、上传作业要求、（上传视频课程 PS：这个不需要，视频存在MangoDB）、审核作业（评分）
- 管理员：登录、审核课程、审核教师资格

## 模型

- 学生：用户ID、微信ID、偏好【】、报名课程【】、昵称、手机号、密码、性别、所属院校、所属专业、年级
- 教师：教师ID、微信ID、开设课程【】、姓名、手机号、密码、所属院校、所属专业、擅长领域（最多课程标签的两个）
- 课程：课程ID、教师ID、报名学生【】、课程作业【】、课程标签【】、课程评论【】、课程名、课程简介、课程视频、课程评分、课时数、上传时间
- 作业：作业ID、学生ID、课程ID、作业内容、作业评分、作业回复、作业点赞数（学生点赞）、提交时间、截止时间
- 评论：评论ID、学生ID、课程ID、回复【】、点赞数、评论内容、评论时间
- 专业：专业ID（内容）、偏好【】、教师【】
- 偏好：偏好ID（内容）、专业ID（专业分类）

## 数据表设计

### 实体数据表

- 学生表：用户ID（主键）、微信ID、昵称、手机号、密码、性别、所属院校、所属专业、年级、学生图片

  外键：偏好（多对多）、报名课程（多对多）、课程评分（多对多）

- 教师：教师ID（主键）、微信ID、姓名、手机号、密码、性别、所属院校、所属专业、教师图片

  外键：开设课程（一对多）

- 课程：课程ID（主键）、课程名、课程简介、课程视频、课程评分、课时数、上传时间、课程图片

  外键：教师ID（一对一）、报名学生（多对多）、课程作业（一对多）、课程标签（一对多）、课程评论（一对多）、课程评分（多对多）

- 作业：作业ID（主键）、作业内容、作业回复、作业点赞数（学生点赞）、提交时间、截止时间、文件
  
  外键：学生ID（一对一）、课程ID（一对一）、作业评分（一对多）
  
- 评论：评论ID（主键）、点赞数、评论内容、评论时间

  外键：学生ID（一对一）、课程ID（一对一）、回复（一对多）

- 专业：专业ID（主键）、专业内容

  外键：偏好ID（一对多）

- 偏好：偏好ID（主键）、偏好内容

  外键：专业ID（一对一）、学生ID（多对多）

### 关系数据表

- 偏好与学生：偏好内容

  外键：学生ID、偏好ID

- 课程与学生（报名）：

  外键：学生ID、课程ID

- 课程与学生（评分）：评分分数

  外键：学生ID、课程ID

- 作业与老师（评分）：评分分数

  外键：教师ID、作业ID

## API设计

### 1、用户登录

#### 1.1 注册返回验证码API（学生&教师）：

- POST类型
- 上传手机号
- 返回值 无
- // 服务器发送验证码

#### 1.2 用户注册API（学生&教师）

- POST
- 上传用户类型（教师或者学生）、手机号、验证码、密码
- 教师或者学生表中插入一条数据（手机号、密码）
- 返回值 无

#### 1.3 用户登录API（学生&教师）

- POST
- 上传手机号、密码
- 返回值 教师表或者学生表数据

### 2、用户完善信息

#### 2.1 学生完善信息API

- POST
- 上传学生ID、昵称、性别、学校、专业、年级
- 数据库中在相应学生表中修改信息
- 返回值 无

#### 2.2 学生偏好设置API

- POST
- 上传学生ID、偏好ID
- 数据库中在学生偏好关系表中添加一条（在数据表中查询该学生是否设置过偏好，返回两种状态码来区分设置过偏好的学生和没设置过偏好的学生）
- 返回值 无

#### 2.3 教师完善信息API

- POST
- 上传教师ID、姓名、性别、学校、专业
- 数据库中在相应教师表中修改信息
- 返回值 无

### 3、学生报名课程

#### 3.1 学生报名课程API

- POST
- 上传学生ID、课程ID
- 数据库中在学生课程报名关系表中添加一条
- 返回值 无

### 4、学生评价课程API
#### 4.1 学生评价课程
- POST
- 上传学生ID、课程ID、评分
- 数据库中在学生课程评分关系表中添加一条
- 返回值 无

### 5、查询信息

#### 5.1 返回一个专业下的所有课程API

- GET
- 上传专业ID
- 返回值 数据库中此专业ID的所有课程信息

#### 5.2 返回一个教师所开设的所有课程API

- GET
- 上传教师ID
- 返回值 数据库中此教师ID的所有课程信息

#### 5.3 返回一个课程里的所有评论API

- GET
- 上传课程ID
- 返回值 数据库中此课程ID的所有评论信息

#### 5.4 返回一个专业里的所有教师API

- GET
- 上传专业ID
- 返回值 数据库中此专业ID的所有教师信息

### 6、首页展示

#### 6.1 返回三个报名人数最多的课程信息和相关老师信息

- GET
- select class_id,count(class_id) from relationship_stu_class_enroll group by class_id order by count(class_id) desc;
- 返回值 课程与学生表（报名）中报名人数最多的三门课程信息和相关老师信息

#### 6.2 返回所有专业信息

- GET
- 返回值 专业ID和专业内容

#### 6.3 返回



### 6、教师作业评分API
#### 6.1 教师作业评分API
- POST
- 上传老师ID、作业ID、评分
- 数据库中在老师作业关系表中添加一条
- 返回值 无
